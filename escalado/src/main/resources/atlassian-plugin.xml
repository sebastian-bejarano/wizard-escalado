<?xml version="1.0" encoding="UTF-8"?>

<atlassian-plugin key="${atlassian.plugin.key}" name="${project.name}" plugins-version="2">
  <plugin-info> 
    <description>${project.description}</description>  
    <version>${project.version}</version>  
    <vendor name="${project.organization.name}" url="${project.organization.url}"/>  
    <param name="plugin-icon">images/pluginIcon.png</param>  
    <param name="plugin-logo">images/pluginLogo.png</param> 
  </plugin-info>  
  <!-- add our i18n resource -->  
  <resource type="i18n" name="i18n" location="escalado"/>
  <!-- add our web resources -->  
  <web-resource key="escalado-resources" name="escalado Web Resources"> 
    <dependency>com.atlassian.auiplugin:ajs</dependency>
    <dependency>com.atlassian.auiplugin:dialog2</dependency>
    <resource type="download" name="escalado.css" location="/css/escalado.css"/>  
    <resource type="download" name="escalado.js" location="/js/escalado.js"/>  
    <resource type="download" name="images/" location="/images"/>
    <context>atl.general</context>
  </web-resource>
  <!--Web item que funciona como botón-->
  <web-item name="miItem" i18n-name-key="mi-item.name" key="mi-item" section="transitions-all" weight="1000">
    <!--Condición controlada por la clase para verificar que el issueType coincida con el pasado por el parámetro-->
    <condition class="com.segurosbolivar.plugins.conditions.GUIButtonCondition">
      <param name="issueType1">Incident</param>
      <param name="issueType2">Task</param>
      <param name="grupo">Permisos para escalar</param>
    </condition>
    <!--Descripción del web-item-->
    <description key="mi-item.description">The miItem Plugin</description>
    <!--Label tomado de escalado.properties en la estructura de carpetas-->
    <label key="mi-item.label"/>
    <!--Link con el que funcionará el botón de "Escalado"-->
    <link linkId="mi-item-link">/plugins/servlet/pluginUI?issueKey=$issue.getKey()</link>
    <!--ABRE EL LINK DEL SERVLET EN CUADRO DE DIÁLOGO-->
    <styleClass>trigger-dialog</styleClass>
  </web-item>
  <!--Servlet para lograr configuraciones del plugin-->
  <servlet name="pluginUI" class="com.segurosbolivar.plugins.PluginServlet" key="pluginUI">
    <url-pattern>/pluginUI</url-pattern>
  </servlet>
  <servlet name="secondStep" class="com.segurosbolivar.plugins.SecondStep" key="secondStep">
    <url-pattern>/pluginUI/secondStep</url-pattern>
  </servlet>
  <servlet name="secondStep" class="com.segurosbolivar.plugins.ThirdStep" key="thirdStep">
    <url-pattern>/pluginUI/thirdStep</url-pattern>
  </servlet>
  <servlet name="secondStep" class="com.segurosbolivar.plugins.FourthStep" key="fourthStep">
    <url-pattern>/pluginUI/fourthStep</url-pattern>
  </servlet>
  <servlet name="secondStep" class="com.segurosbolivar.plugins.CreateProblem" key="createProblem">
    <url-pattern>/pluginUI/createProblem</url-pattern>
  </servlet>
</atlassian-plugin>
